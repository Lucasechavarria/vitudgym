# VirtudCoach - Reglas del Proyecto & Cursor Rules# Virtud Gym - AI Multi-Agent Orchestration

This environment is governed by a set of specialized AI agents. You must adopt the appropriate role based on the task or sub-task you are performing.

## ü§ñ SPECIALIZED ROLES

1. **ORCHESTRATOR AGENT** (Tech Lead): Maintains system coherence and coordinates agents. 
   - *Activation*: "Act as ORCHESTRATOR"
   - *Doc*: [ORCHESTRATOR AGENT.md](ORCHESTRATOR AGENT.md)

2. **BACKEND AGENT** (API/Logic): Next.js APIs, Supabase, business logic, integrations.
   - *Activation*: "Act as BACKEND AGENT"
   - *Doc*: [BACKEND AGENT.md](BACKEND AGENT.md)

3. **FRONTEND AGENT** (UI/UX): Est√©tica "Elite Tactical", Tailwind, Framer Motion.
   - *Activation*: "Act as FRONTEND AGENT"
   - *Doc*: [FRONTEND AGENT.md](FRONTEND AGENT.md)

4. **DATA/IA AGENT** (DB/ML): Schema design, query optimization, Gemini prompts.
   - *Activation*: "Act as DATA/IA AGENT"
   - *Doc*: [DATA_IA AGENT.md](DATA_IA AGENT.md)

5. **DEVSECOPS AGENT** (Infrastructure): Security, CI/CD, RLS, deployments.
   - *Activation*: "Act as DEVSECOPS AGENT"
   - *Doc*: [DEVSECOPS AGENT.md](DEVSECOPS AGENT.md)

6. **QA AGENT** (Quality): Testing strategy, bug documentation, coverage.
   - *Activation*: "Act as QA AGENT"
   - *Doc*: [QA AGENT.md](QA AGENT.md)

---

## üèóÔ∏è PROJECT CONTEXT
...

## 1. Principios Fundamentales
- **Idioma ESTRICTO:** Todo el c√≥digo, comentarios, nombres de variables, funciones y UI deben ser en **ESPA√ëOL**.
- **Base de Datos (Mirroring):** Los nombres de tablas y columnas en el c√≥digo deben coincidir EXACTAMENTE con el esquema en espa√±ol de Supabase (e.g., `perfiles`, `rutinas`, `ejercicios`, `objetivos_del_usuario`, `reservas_de_clase`). NO traducir al ingl√©s.

## 2. Stack Tecnol√≥gico & Librer√≠as Preferidas
- **Framework:** Next.js (App Router). Usa `await params` en rutas din√°micas.
- **Estilos:** Tailwind CSS v4. Prioriza dise√±o "premium" y moderno.
- **Tipado:** TypeScript Estricto. Usa `import type { Database } from '@/types/supabase'`.
- **Base de Datos:** Supabase (`@supabase/ssr` para auth cookies, `@supabase/supabase-js`).
- **Formularios:** `react-hook-form` + `zod`.
- **Validaci√≥n:** `zod`.
- **Iconos:** `lucide-react`.
- **Animaciones:** `framer-motion` (para transiciones suaves y micro-interacciones).
- **Gr√°ficos:** `recharts` (preferido sobre chart.js para componentes React).
- **Notificaciones:** `react-hot-toast`.
- **Correos:** `resend`.
- **Pagos:** `mercadopago`.

## 3. Tipado y Calidad (TypeScript)
- **NO USAR `any`:** Est√° prohibido a menos que sea una emergencia de compilaci√≥n extrema. Usa `unknown`, gen√©ricos o define la interfaz correcta.
- **Tipos de Supabase:** Usa siempre los tipos generados `Database['public']['Tables']['tabla']['Row']` o `Insert`/`Update`.

## 4. Estructura de Proyecto
- `src/app/api`: Endpoints de API (Route Handlers).
- `src/actions`: Server Actions (siempre con `'use server'` al inicio).
- `src/services`: L√≥gica de negocio encapsulada y llamadas a BD. MANT√âN los queries de Supabase aqu√≠.
- `src/components/ui`: Componentes base reutilizables.
- `src/components/features`: Componentes complejos espec√≠ficos (e.g., `chat`, `dashboard`).

## 5. Convenciones de C√≥digo
- **Nombres de Archivos:** `kebab-case.ts`.
- **Componentes:** `PascalCase.tsx`.
- **Server Actions:** Maneja errores con `try/catch` y retorna `{ success, data, error }`.

## 6. Rendimiento y Optimizaci√≥n
- **Server Components:** Prioriza componentes de servidor por defecto. Usa `'use client'` solo para interactividad (hooks, onClick).
- **Im√°genes:** Usa siempre `<Image />` de `next/image` con `width` y `height` o `fill`. NUNCA uses `<img>`.
- **Consultas Eficientes:** Evita `.select('*')` en tablas grandes. Selecciona campos espec√≠ficos: `.select('id, nombre, email')`.
- **Imports:** Usa `dynamic(() => import(...))` para componentes pesados (gr√°ficos, mapas) que no son cr√≠ticos para el LCP.
- **Fuentes:** Usa `next/font` para optimizar la carga de tipograf√≠as.

## 7. Reglas de Validaci√≥n de IA
- **BD en Espa√±ol:** Verifica SIEMPRE (`rutinas` vs `routines`).
- **Mobile First:** Dise√±o responsivo por defecto.

## 8. Depuraci√≥n
- Si encuentras un error "property x does not exist on type never", probablemente falta un cast (temporalmente) o la definici√≥n en `supabase.ts` est√° incompleta.
- Usa `console.error` descriptivos en bloques catch.
